<?php
class Kelasabsensibulanan extends CI_Controller { public function __construct() { goto U3Gnr; LKMaV: show_error("\x48\x61\156\171\141\x20\x41\144\x6d\151\x6e\x69\x73\164\x72\141\164\x6f\162\x20\171\141\156\147\40\x64\151\x62\145\162\x69\40\150\x61\153\x20\165\x6e\x74\x75\x6b\40\155\145\x6e\x67\141\x6b\163\145\163\40\150\141\x6c\x61\155\x61\x6e\x20\x69\156\151\x2c\x20\x3c\141\40\150\162\145\x66\75\42" . base_url("\x64\x61\x73\x68\x62\x6f\x61\x72\x64") . "\42\x3e\x4b\145\x6d\x62\141\154\151\40\153\x65\40\155\x65\156\165\x20\x61\x77\141\x6c\74\57\141\x3e", 403, "\x41\x6b\x73\145\163\40\104\151\x62\x61\164\141\x73\x69"); goto kej52; U3Gnr: parent::__construct(); goto CHJPZ; fZJGY: $this->load->library(["\144\141\164\141\x74\141\142\154\145\x73", "\x66\157\x72\x6d\x5f\x76\141\x6c\151\144\141\164\151\157\156"]); goto QS0pX; CHJPZ: if (!$this->ion_auth->logged_in()) { goto lP0b1; } goto Do0VV; GwBVp: goto B2fBq; goto S2nw3; kej52: gX1mS: goto GwBVp; x1U3k: redirect("\141\165\x74\150"); goto dNlBb; Do0VV: if (!(!$this->ion_auth->is_admin() && !$this->ion_auth->in_group("\x67\x75\162\165"))) { goto gX1mS; } goto LKMaV; fA1x7: $this->load->model("\x44\x61\163\x68\142\157\x61\162\144\x5f\x6d\157\x64\145\x6c", "\144\141\163\150\x62\157\141\162\x64"); goto v4JbW; S2nw3: lP0b1: goto x1U3k; yJ9eO: $this->load->model("\x4b\x65\154\x61\163\137\x6d\x6f\x64\x65\154", "\x6b\145\154\141\x73"); goto Ys33T; dNlBb: B2fBq: goto fZJGY; v4JbW: $this->load->model("\x44\x72\x6f\160\x64\157\167\x6e\137\x6d\x6f\144\145\x6c", "\144\x72\x6f\160\x64\157\167\x6e"); goto yJ9eO; Ys33T: $this->form_validation->set_error_delimiters('', ''); goto hJjuY; QS0pX: $this->load->model("\x4d\141\163\x74\x65\162\137\155\x6f\144\x65\154", "\x6d\x61\163\x74\x65\162"); goto fA1x7; hJjuY: } public function output_json($data, $encode = true) { goto v9vvz; v9vvz: if (!$encode) { goto q3bc1; } goto ok1u9; MwLfA: $this->output->set_content_type("\x61\160\160\x6c\151\x63\141\164\x69\157\156\57\152\163\x6f\x6e")->set_output($data); goto Lg4dt; ok1u9: $data = json_encode($data); goto lv8zd; lv8zd: q3bc1: goto MwLfA; Lg4dt: } public function index() { goto XcNG1; yzn2x: $data["\x6d\141\x70\x65\154"] = $arrMapel; goto QVYsC; lLDye: $data["\160\x72\157\x66\151\x6c\x65"] = $this->dashboard->getProfileAdmin($user->id); goto zQ45E; q06nF: $this->load->view("\155\x65\x6d\142\145\162\x73\57\147\165\162\165\x2f\164\145\x6d\x70\154\x61\x74\x65\163\57\150\145\141\144\145\162", $data); goto rRLq2; HaV7Q: $data["\x74\x70\x5f\141\x63\x74\151\x76\x65"] = $tp; goto E14PW; E14PW: $data["\x73\155\x74"] = $this->dashboard->getSemester(); goto wLEWS; DAFs3: $arrMapel = []; goto ACYDW; Wxb0R: KwVHd: goto bZnOw; F7gbI: if ($this->ion_auth->is_admin()) { goto rxoGG; } goto uhrvW; qvWuV: $nguru[$guru->id_guru] = $guru->nama_guru; goto P8_Ki; mAKnL: goto DeAav; goto I0NNH; uhrvW: $guru = $this->dashboard->getDataGuruByUserId($user->id, $tp->id_tp, $smt->id_smt); goto qvWuV; Erpdj: if (!($mapel != null)) { goto yMUC8; } goto oEgAJ; QVYsC: $data["\141\x72\162\x6b\145\x6c\x61\163"] = $arrKelas; goto Dr09w; HjJdA: if (!($mapel != null)) { goto KwVHd; } goto Ory1F; JpSkR: $this->load->view("\x5f\x74\145\155\160\154\x61\164\x65\x73\57\144\141\163\x68\x62\157\x61\162\144\x2f\x5f\146\x6f\157\164\x65\x72"); goto Gfc27; zQ45E: $data["\x6b\x65\154\x61\163"] = $this->dropdown->getAllKelas($tp->id_tp, $smt->id_smt); goto Kt7WA; ufEtX: $this->load->view("\153\x65\x6c\x61\163\57\x61\142\163\145\x6e\142\x75\x6c\x61\x6e\141\156\x2f\x64\x61\164\141"); goto JpSkR; m5HUl: $data = ["\x75\163\145\162" => $user, "\x6a\x75\144\x75\154" => "\x44\x61\x66\x74\141\x72\40\x48\141\x64\x69\162\40\102\x75\154\141\156\x61\x6e", "\163\x75\142\x6a\165\x64\x75\154" => "\x44\x61\146\164\141\x72\x20\x48\141\144\x69\162\40\x42\165\x6c\141\156\x61\156\40\x53\151\163\167\x61", "\x73\145\x74\x74\x69\x6e\x67" => $this->dashboard->getSetting()]; goto YgWUk; I0NNH: rxoGG: goto lLDye; cNqpi: $this->load->view("\x5f\164\145\x6d\x70\154\x61\x74\x65\x73\x2f\x64\x61\163\x68\x62\157\x61\162\x64\x2f\x5f\x68\145\x61\x64\x65\x72", $data); goto ufEtX; Dr09w: $data["\x6b\145\154\x61\x73"] = count($arrId) > 0 ? $this->dropdown->getAllKelasByArrayId($tp->id_tp, $smt->id_smt, $arrId) : []; goto q06nF; bZnOw: $arrId = []; goto Erpdj; r_DwH: $this->load->view("\155\x65\x6d\x62\x65\162\x73\57\x67\165\162\165\57\x74\x65\155\160\x6c\x61\x74\145\x73\x2f\x66\157\x6f\x74\145\162"); goto mAKnL; wLEWS: $data["\163\155\164\x5f\x61\143\164\151\x76\x65"] = $smt; goto J3cBy; FvFT6: Ra20V: goto jscn0; ymHau: $data["\151\x64\137\147\165\162\165"] = $guru->id_guru; goto MEZpt; Kt7WA: $data["\147\x75\162\x75"] = $this->dropdown->getAllGuru(); goto zUgSv; vjI5o: x3oOi: goto Wxb0R; fcUaY: $mapel = json_decode(json_encode(unserialize($mapel_guru->mapel_kelas))); goto DAFs3; eMUWI: $data["\x74\160"] = $this->dashboard->getTahun(); goto HaV7Q; YgWUk: $tp = $this->master->getTahunActive(); goto no6Py; MEZpt: $mapel_guru = $this->kelas->getGuruMapelKelas($guru->id_guru, $tp->id_tp, $smt->id_smt); goto fcUaY; XcNG1: $user = $this->ion_auth->user()->row(); goto m5HUl; oEgAJ: foreach ($mapel[0]->kelas_mapel as $id_mapel) { array_push($arrId, $id_mapel->kelas); UZ_uD: } goto FvFT6; ACYDW: $arrKelas = []; goto HjJdA; P8_Ki: $data["\147\x75\162\165"] = $guru; goto ymHau; no6Py: $smt = $this->master->getSemesterActive(); goto eMUWI; J3cBy: $data["\x62\165\154\x61\x6e"] = $this->dropdown->getBulan(); goto F7gbI; Ory1F: foreach ($mapel as $m) { goto mmFSR; gxIj5: foreach ($m->kelas_mapel as $kls) { $arrKelas[$m->id_mapel][] = ["\x69\x64\x5f\x6b\x65\x6c\x61\163" => $kls->kelas, "\x6e\x61\x6d\141\137\153\145\154\141\x73" => $this->dropdown->getNamaKelasById($tp->id_tp, $smt->id_smt, $kls->kelas)]; ulf8L: } goto FKanU; gLENF: zzNXF: goto FJiOb; mmFSR: $arrMapel[$m->id_mapel] = $m->nama_mapel; goto gxIj5; FKanU: cvBao: goto gLENF; FJiOb: } goto vjI5o; rRLq2: $this->load->view("\x6b\x65\x6c\141\x73\x2f\141\142\163\145\156\142\165\154\x61\x6e\x61\x6e\57\x64\141\164\141"); goto r_DwH; jscn0: yMUC8: goto yzn2x; Gfc27: DeAav: goto cc94e; zUgSv: $data["\x6d\141\x70\x65\x6c"] = $this->dropdown->getAllMapel(); goto cNqpi; cc94e: } public function loadAbsensiMapel() { goto fKMIY; Vppqf: if ($jadwal != null) { goto UAjPy; } goto lS4ek; XfzhS: $id_smt = $this->master->getSemesterActive()->id_smt; goto l6Sl1; s6kO7: if (!($i < $tgl)) { goto Bh5ul; } goto UsxFF; yExMa: UAjPy: goto uSuiK; h7V8_: $log = []; goto cYKwb; gB8qB: $b = $bulan < 10 ? "\x30" . $bulan : $bulan; goto pkEDU; bYnJj: $id_tp = $this->master->getTahunActive()->id_tp; goto XfzhS; fKMIY: $id_kelas = $this->input->post("\x6b\x65\x6c\x61\163", true); goto KQ1Ge; RujVv: $bulan = $this->input->post("\x62\154\x6e", true); goto bYnJj; Q4oFU: kcI5r: goto s6kO7; F8vWP: PG27H: goto C84WP; hMkdI: vIKWa: goto FP7Up; zQCRS: $infos = $this->kelas->getJadwalMapelByMapel($id_kelas, $id_mapel, $id_tp, $id_smt); goto eSk5N; sH84Y: $jadwal_materi = []; goto hfzV9; zBFwQ: $tgl = cal_days_in_month(CAL_GREGORIAN, $bulan, $tahun); goto sH84Y; FP7Up: $this->output_json(["\x6c\x6f\147" => $log, "\x6a\x61\144\167\141\x6c" => $jadwal, "\x6d\141\x74\x65\x72\151" => $jadwal_materi, "\155\141\x70\x65\x6c\x73" => $mapel_bulan_ini]); goto r85TS; lS4ek: $this->output_json(["\x6a\141\144\x77\141\154" => $jadwal]); goto cy5f5; cYKwb: $siswa = $this->kelas->getKelasSiswa($id_kelas, $id_tp, $id_smt); goto SjHRX; SjHRX: foreach ($siswa as $s) { goto JnYur; lZUWG: wnnFK: goto YC2c9; OravA: $i++; goto Zy4OU; Me8Bc: htjTU: goto OravA; Xwjxk: $b = $bulan < 10 ? "\x30" . $bulan : $bulan; goto rvWln; JnYur: $arrMateri = []; goto XptIF; Zy4OU: goto wnnFK; goto uo2Rn; QH4KI: Z6W0Q: goto uB2F_; x2LKV: $t = $i + 1 < 10 ? "\60" . ($i + 1) : $i + 1; goto Xwjxk; rvWln: $arrMateri[1][] = $materi_perbulan != null && isset($materi_perbulan[$s->id_siswa]) && isset($materi_perbulan[$s->id_siswa][1]) && isset($materi_perbulan[$s->id_siswa][1][$tahun . "\55" . $b . "\x2d" . $t]) ? $materi_perbulan[$s->id_siswa][1][$tahun . "\x2d" . $b . "\55" . $t] : null; goto fcVX4; XptIF: $i = 0; goto lZUWG; YC2c9: if (!($i < $tgl)) { goto R5t5q; } goto x2LKV; fcVX4: $arrMateri[2][] = $materi_perbulan != null && isset($materi_perbulan[$s->id_siswa]) && isset($materi_perbulan[$s->id_siswa][2]) && isset($materi_perbulan[$s->id_siswa][2][$tahun . "\55" . $b . "\55" . $t]) ? $materi_perbulan[$s->id_siswa][2][$tahun . "\55" . $b . "\x2d" . $t] : null; goto Me8Bc; uo2Rn: R5t5q: goto LUDah; LUDah: $log[$s->id_siswa] = ["\x6e\x61\155\141" => $s->nama, "\x6e\x69\x73" => $s->nis, "\153\x65\x6c\141\163" => $s->nama_kelas, "\155\141\164\145\162\x69" => $arrMateri[1], "\x74\165\147\141\163" => $arrMateri[2]]; goto QH4KI; uB2F_: } goto lID9I; l6Sl1: $jadwal = $this->dashboard->getJadwalKbm($id_tp, $id_smt, $id_kelas); goto Vppqf; cy5f5: goto avqO5; goto yExMa; YVsAp: $mapel_bulan_ini = []; goto zQCRS; C84WP: $i++; goto yZNQG; pkEDU: $jadwal_materi[$t] = (array) $this->kelas->getAllMateriByTgl($id_kelas, $tahun . "\55" . $b . "\x2d" . $t, [$id_mapel]); goto F8vWP; OdsUH: $tahun = $this->input->post("\164\x68\156", true); goto RujVv; eSk5N: foreach ($infos as $info) { goto S4kZd; sjHNE: RlmKV: goto e1sEt; S4kZd: $dates = $this->total_hari($info->id_hari, $bulan, $tahun); goto zgf1w; zgf1w: foreach ($dates as $date) { goto sk0EX; cO211: iEqhK: goto khanh; foO3V: $mapel_bulan_ini[$d[2]][$info->jam_ke] = $date; goto cO211; sk0EX: $d = explode("\55", $date ?? ''); goto foO3V; khanh: } goto sjHNE; e1sEt: e_Kga: goto ag0xv; ag0xv: } goto hMkdI; lID9I: qlQ8Q: goto YVsAp; uSuiK: $jadwal->istirahat = unserialize($jadwal->istirahat); goto zBFwQ; r85TS: avqO5: goto w7SCs; UvPAC: $materi_perbulan = $this->kelas->getRekapBulananSiswa($id_mapel, $id_kelas, $tahun, $bulan); goto h7V8_; KQ1Ge: $id_mapel = $this->input->post("\x6d\x61\x70\x65\154", true); goto OdsUH; rjsV7: Bh5ul: goto UvPAC; yZNQG: goto kcI5r; goto rjsV7; hfzV9: $i = 0; goto Q4oFU; UsxFF: $t = $i + 1 < 10 ? "\60" . ($i + 1) : $i + 1; goto gB8qB; w7SCs: } function total_hari($id_day, $bulan, $taun) { goto Q9A_v; BBuRG: if (!(date("\116", strtotime($taun . "\x2d" . $bulan . "\55" . $i)) == $idday)) { goto sR1Ek; } goto kNNFD; O1O2L: yJCsE: goto CFvbp; kNNFD: $days++; goto v284y; wRjDk: $total_days = cal_days_in_month(CAL_GREGORIAN, $bulan, $taun); goto N2Gn3; N2Gn3: $idday = $id_day == "\67" ? 0 : $id_day; goto ngWcY; utQ1X: sR1Ek: goto O1O2L; Q9A_v: $days = 0; goto NQOl1; J2sHR: unNoL: goto ovAOk; xpJA9: return $dates; goto TOYcL; moK81: goto unNoL; goto rqnZm; CFvbp: $i++; goto moK81; ovAOk: if (!($i < $total_days)) { goto OrO5z; } goto BBuRG; NQOl1: $dates = []; goto wRjDk; v284y: array_push($dates, date("\131\x2d\x6d\55\144", strtotime($taun . "\x2d" . $bulan . "\55" . $i))); goto utQ1X; rqnZm: OrO5z: goto xpJA9; ngWcY: $i = 1; goto J2sHR; TOYcL: } }