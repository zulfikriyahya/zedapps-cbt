<?php
defined("\102\101\x53\105\120\x41\124\x48") or exit("\116\x6f\x20\x64\151\162\145\143\x74\40\163\143\162\151\x70\164\40\x61\x63\143\145\163\x73\x20\x61\x6c\x6c\157\x77\x65\144"); class Datamapel extends CI_Controller { public function __construct() { goto Aoa10; rdZpR: $this->load->dbforge(); goto iphhp; vSOYM: zyQ44: goto rdZpR; ddHJy: $this->load->model("\104\x72\x6f\160\144\157\167\156\x5f\155\157\144\145\x6c", "\x64\162\x6f\160\144\x6f\x77\156"); goto jHacc; x8ryo: $this->load->model("\104\x61\x73\x68\142\157\141\x72\144\x5f\x6d\x6f\144\x65\154", "\144\x61\x73\150\x62\157\141\162\x64"); goto ddHJy; gKMmN: if ($this->ion_auth->is_admin()) { goto XqTqk; } goto PSANh; giEkS: $this->load->model("\115\x61\x73\x74\x65\162\137\155\157\x64\145\154", "\x6d\x61\163\x74\145\162"); goto x8ryo; YSTUF: redirect("\141\165\164\x68"); goto vSOYM; iphhp: $this->load->library(["\x64\141\164\141\164\x61\142\x6c\x65\x73", "\146\157\162\155\137\x76\x61\x6c\151\144\x61\x74\151\x6f\156"]); goto giEkS; RK9td: if (!$this->ion_auth->logged_in()) { goto WhftW; } goto gKMmN; QQN4P: WhftW: goto YSTUF; Xuu_8: goto zyQ44; goto QQN4P; PSANh: show_error("\x48\141\x6e\171\x61\40\x41\x64\x6d\x69\156\151\x73\164\162\141\x74\157\162\x20\x79\141\156\147\40\x64\151\142\145\162\x69\40\x68\141\153\40\x75\156\x74\165\x6b\x20\155\145\156\147\141\x6b\163\x65\x73\40\150\x61\x6c\141\155\141\x6e\40\151\156\x69\54\40\x3c\141\x20\x68\x72\x65\146\x3d\42" . base_url("\x64\141\163\x68\x62\x6f\141\x72\x64") . "\x22\76\x4b\145\x6d\x62\x61\154\151\40\x6b\145\x20\155\145\156\x75\40\x61\x77\x61\154\x3c\57\x61\x3e", 403, "\101\x6b\163\x65\x73\40\x54\x65\162\154\141\162\x61\x6e\x67"); goto rak9I; rak9I: XqTqk: goto Xuu_8; jHacc: $this->form_validation->set_error_delimiters('', ''); goto U7kuc; Aoa10: parent::__construct(); goto RK9td; U7kuc: } public function output_json($data, $encode = true) { goto DXm_Y; vMz9a: $data = json_encode($data); goto gWHW8; DXm_Y: if (!$encode) { goto entX9; } goto vMz9a; r3UnR: $this->output->set_content_type("\141\160\160\154\x69\143\x61\x74\151\x6f\x6e\57\x6a\x73\x6f\156")->set_output($data); goto v2TUX; gWHW8: entX9: goto r3UnR; v2TUX: } private function updateUrutanTampil() { goto g2FOc; g2FOc: $mapels = $this->db->select("\x2a")->from("\155\x61\x73\164\145\162\x5f\x6d\x61\x70\145\x6c")->get()->result(); goto PY49t; GelzM: CD_3p: goto Gj6s3; PY49t: $insert = []; goto trx2T; BRIvs: $this->db->update_batch("\155\x61\x73\x74\x65\162\137\x6d\141\160\x65\154", $insert); goto GelzM; trx2T: foreach ($mapels as $mapel) { $insert = ["\x69\x64\x5f\155\x61\160\x65\x6c" => $mapel->id_mapel, "\156\x61\155\x61\137\155\x61\160\145\x6c" => $mapel->id_mapel, "\x6b\x6f\144\x65" => $mapel->id_mapel, "\x6b\145\x6c\x6f\155\160\x6f\x6b" => $mapel->id_mapel, "\x62\x6f\x62\x6f\x74\137\x70" => $mapel->id_mapel, "\x62\x6f\x62\157\x74\137\x6b" => $mapel->id_mapel, "\x6a\x65\156\x6a\141\156\147" => $mapel->id_mapel, "\165\162\165\164\x61\156" => $mapel->id_mapel, "\x75\x72\x75\x74\x61\x6e\x5f\164\141\x6d\x70\151\x6c" => $mapel->id_mapel, "\163\x74\x61\x74\165\163" => $mapel->id_mapel, "\x64\x65\x6c\145\164\x61\x62\154\145" => $mapel->id_mapel]; f0eXM: } goto ylCMx; ylCMx: g9o7P: goto rco9V; rco9V: if (!(count($insert) > 0)) { goto CD_3p; } goto BRIvs; Gj6s3: } public function index() { goto e2LcF; ChHHE: $data["\153\x65\x6c\x6f\155\x70\157\153"] = $this->dropdown->getDataKelompokMapel(); goto hisV7; uX6au: KG6n0: goto nuJGN; EJEPj: $data["\x73\x6d\164"] = $this->dashboard->getSemester(); goto zKf90; Lb36F: $data["\163\x75\x62\x5f\x6b\145\154\x6f\x6d\160\157\153\137\155\141\x70\x65\x6c"] = $this->master->getDataSubKelompokMapel(); goto ChHHE; zv9oj: $this->load->view("\x5f\x74\145\x6d\160\x6c\x61\164\x65\x73\x2f\x64\x61\x73\150\142\x6f\141\x72\144\57\137\x66\x6f\x6f\164\145\162"); goto oO7SI; p0T4k: $data["\x74\x70"] = $this->dashboard->getTahun(); goto upqBS; nuJGN: $user = $this->ion_auth->user()->row(); goto Gd3aT; ylEuo: $this->load->view("\137\x74\x65\x6d\160\154\x61\164\145\x73\x2f\x64\x61\163\x68\x62\157\141\x72\144\57\x5f\150\145\x61\144\145\x72", $data); goto oF9Ir; e2LcF: if ($this->db->field_exists("\165\x72\165\x74\141\156\137\x74\141\x6d\160\x69\154", "\155\141\163\x74\x65\162\x5f\155\x61\x70\x65\154")) { goto KG6n0; } goto fR5vq; upqBS: $data["\x74\160\x5f\141\x63\x74\x69\x76\145"] = $this->dashboard->getTahunActive(); goto EJEPj; jPIfG: $this->dbforge->add_column("\155\x61\x73\x74\145\x72\137\155\141\x70\x65\x6c", $fields); goto uX6au; oF9Ir: $this->load->view("\x6d\x61\x73\x74\145\x72\57\155\x61\x70\145\x6c\x2f\x64\141\x74\x61"); goto zv9oj; W0etI: $data["\x6b\141\x74\145\147\x6f\x72\x69"] = ["\127\x41\112\111\x42", "\120\101\x49\40\50\113\145\x6d\145\156\141\147\x29", "\120\105\115\x49\x4e\x41\124\x41\116\40\x41\x4b\x41\x44\x45\x4d\x49\113", "\x41\113\101\x44\x45\x4d\111\113\40\113\105\x4a\125\x52\125\101\x4e", "\114\x49\x4e\124\x41\123\x20\115\x49\x4e\x41\124", "\x4d\125\114\117\x4b"]; goto Hst3i; Gd3aT: $setting = $this->dashboard->getSetting(); goto WbuId; fR5vq: $fields = array("\x75\162\x75\x74\141\x6e\x5f\164\x61\155\160\151\x6c" => array("\164\x79\x70\x65" => "\x69\x6e\x74\50\63\51", "\x61\x66\x74\145\162" => "\x75\162\165\164\141\156")); goto jPIfG; WbuId: $data = ["\165\163\x65\x72" => $user, "\x6a\165\x64\x75\x6c" => "\115\141\164\141\x20\x50\x65\154\x61\x6a\x61\162\x61\x6e", "\163\165\142\x6a\x75\144\x75\154" => "\x44\141\x66\164\141\162\x20\115\x61\164\141\x20\x50\145\x6c\x61\x6a\141\x72\141\156", "\x70\x72\157\x66\x69\x6c\x65" => $this->dashboard->getProfileAdmin($user->id), "\163\x65\x74\x74\151\156\147" => $setting]; goto p0T4k; hisV7: $data["\x73\164\x61\164\x75\x73"] = ["\x4e\x6f\x6e\141\x6b\164\x69\x66", "\x41\x6b\164\x69\x66"]; goto qwwuy; Hst3i: $data["\x6b\x65\x6c\x6f\x6d\x70\157\153\x5f\x6d\141\x70\145\154"] = $this->master->getDataKelompokMapel(); goto Lb36F; qwwuy: $data["\x6d\x61\160\x65\x6c\x5f\156\x6f\156\x5f\141\x6b\164\x69\x66"] = $this->master->getAllMapelNonAktif($setting->jenjang); goto ylEuo; zKf90: $data["\163\x6d\164\137\x61\143\x74\151\x76\145"] = $this->dashboard->getSemesterActive(); goto W0etI; oO7SI: } public function addKelompokMapel() { goto orF3F; texaF: goto cHYAU; goto PpyCO; PpyCO: YZnzj: goto Ed4qK; Ed4qK: $this->db->where("\151\144\137\153\145\154\137\155\141\x70\145\154", $id); goto WiqXj; O5mAC: $data = $this->master->create("\x6d\141\x73\164\145\162\x5f\x6b\x65\154\157\x6d\160\157\153\137\155\141\160\x65\154", $insert); goto texaF; VN29B: cHYAU: goto kyN_q; kyN_q: $this->output->set_content_type("\x61\x70\160\x6c\151\x63\x61\x74\151\x6f\156\57\152\163\x6f\156")->set_output($data); goto eaHPW; JPGqz: if ($id != null) { goto YZnzj; } goto O5mAC; orF3F: $id = $this->input->post("\151\144\137\x6b\145\154\137\x6d\x61\160\x65\154"); goto tiD0s; WiqXj: $data = $this->db->update("\x6d\x61\x73\x74\x65\x72\137\x6b\145\154\157\x6d\160\157\153\137\x6d\x61\160\145\x6c", $insert); goto VN29B; tiD0s: $insert = ["\x6e\141\x6d\141\137\x6b\145\x6c\137\155\x61\160\145\x6c" => $this->input->post("\156\141\155\x61\x5f\x6b\145\154\137\155\x61\160\145\154", true), "\153\157\x64\145\x5f\x6b\x65\154\137\155\x61\x70\145\x6c" => $this->input->post("\153\x6f\144\145\137\153\145\x6c\x5f\x6d\x61\x70\145\154", true), "\153\x61\x74\x65\x67\x6f\162\151" => $this->input->post("\153\141\x74\145\147\x6f\x72\x69", true), "\x69\144\x5f\160\x61\x72\145\x6e\164" => $this->input->post("\151\144\137\x70\x61\162\x65\x6e\x74", true)]; goto JPGqz; eaHPW: } public function hapusKelompok() { goto FJg6C; V53jR: $this->output_json(["\163\164\141\x74\165\163" => true, "\x6d\x65\163\x73\x61\x67\x65" => "\x62\x65\x72\x68\141\x73\151\154"]); goto pZkKt; zQV9V: $messages = []; goto zM8yO; Q2iXZ: $nums = $this->db->count_all_results("\x6d\x61\x73\164\x65\162\137\x6b\145\x6c\157\155\160\157\153\x5f\x6d\141\160\x65\x6c"); goto JipDu; RbmC9: if (count($messages) > 0) { goto YZ8MG; } goto lgcxa; JipDu: if (!($nums > 0)) { goto pOIxR; } goto pdc4x; KXveU: array_push($messages, "\x4d\141\x74\x61\40\120\145\x6c\x61\x6a\x61\162\x61\x6e"); goto aOXHe; gdGYe: pOIxR: goto RbmC9; Dp57l: $this->output_json(["\163\164\141\164\165\x73" => false, "\155\x65\x73\163\141\147\145" => "\113\x65\154\x6f\x6d\160\x6f\x6b\40\x4d\141\160\145\x6c\40\x64\x69\x67\165\156\x61\153\x61\156\x20\144\151\x20" . count($messages) . "\x20\164\x61\142\x65\x6c\72\74\142\x72\x3e" . implode("\74\142\162\x3e", $messages)]); goto f2_h0; hwT_r: $kode = $this->input->post("\153\157\x64\x65"); goto DWlJc; pdc4x: array_push($messages, "\123\165\142\40\x4b\145\x6c\157\x6d\x70\x6f\153"); goto gdGYe; lgcxa: if (!$this->master->delete("\x6d\141\x73\x74\145\162\x5f\153\145\154\x6f\x6d\x70\157\153\137\155\141\x70\145\x6c", $id, "\x69\x64\137\x6b\x65\154\137\155\x61\x70\145\x6c")) { goto xLf1W; } goto V53jR; zM8yO: $this->db->where_in("\153\x65\154\x6f\x6d\160\x6f\x6b", $kode); goto PH3Q9; aOXHe: iJLqQ: goto AiEt5; pZkKt: xLf1W: goto Ix1dh; DWlJc: $id_parent = $this->input->post("\x69\x64\137\x70\x61\x72\x65\156\x74"); goto zQV9V; f2_h0: JRUFh: goto K61Ot; Ix1dh: goto JRUFh; goto kyDN4; xg2ON: if (!($numm > 0)) { goto iJLqQ; } goto KXveU; kyDN4: YZ8MG: goto Dp57l; PH3Q9: $numm = $this->db->count_all_results("\x6d\141\163\x74\145\162\137\x6d\141\160\x65\x6c"); goto xg2ON; FJg6C: $id = $this->input->post("\151\144\x5f\153\x65\154"); goto hwT_r; AiEt5: $this->db->where_in("\151\144\x5f\x70\141\162\x65\x6e\x74", $id); goto Q2iXZ; K61Ot: } public function create() { goto GlRGd; R2bch: $this->output->set_content_type("\x61\160\x70\x6c\x69\143\x61\164\x69\x6f\156\x2f\x6a\x73\157\x6e")->set_output($data); goto yoE9g; CRF1M: $data = $this->master->create("\155\141\x73\164\x65\x72\x5f\155\141\160\x65\154", $insert); goto R2bch; GlRGd: $setting = $this->dashboard->getSetting(); goto JBQ0o; JBQ0o: $insert = ["\156\141\155\x61\137\x6d\x61\x70\x65\154" => $this->input->post("\x6e\x61\x6d\x61\137\x6d\x61\160\x65\154", true), "\153\157\x64\x65" => $this->input->post("\x6b\x6f\144\x65\x5f\155\x61\160\145\154", true), "\153\x65\x6c\157\x6d\x70\157\x6b" => $this->input->post("\153\x65\154\157\155\x70\x6f\x6b", true), "\165\x72\x75\x74\141\x6e\x5f\x74\141\155\x70\151\x6c" => $this->input->post("\x75\162\x75\164\141\156\137\164\x61\155\160\151\154", true), "\152\x65\156\x6a\141\x6e\147" => $setting->jenjang]; goto CRF1M; yoE9g: } public function getDataKelompok() { goto lskyG; SroHL: echo $this->datatables->generate(); goto fRgiX; VLle6: $this->datatables->where("\151\x64\137\x70\141\x72\145\x6e\x74", "\x30"); goto oy02V; lskyG: $this->datatables->select("\x2a"); goto M57fh; oy02V: $this->db->order_by("\x6b\157\144\x65\x5f\x6b\145\154\x5f\x6d\141\x70\145\x6c"); goto SroHL; M57fh: $this->datatables->from("\155\141\163\164\145\162\137\153\x65\x6c\x6f\155\x70\x6f\x6b\137\155\141\160\x65\x6c"); goto VLle6; fRgiX: } public function getDataSubKelompok() { goto wsdif; mdXM_: echo $this->datatables->generate(); goto HsV6Q; wsdif: $this->datatables->select("\x2a"); goto sQ8Kn; sQ8Kn: $this->datatables->from("\155\x61\163\164\145\x72\x5f\x6b\145\154\157\155\x70\157\x6b\137\155\141\x70\145\154"); goto NgEFw; NgEFw: $this->datatables->where("\x69\144\137\x70\141\162\x65\156\x74\40\x3c\76\40\60"); goto aW3_N; aW3_N: $this->db->order_by("\x6b\x6f\144\145\137\153\145\154\x5f\155\x61\x70\x65\154"); goto mdXM_; HsV6Q: } public function read() { goto o3H9x; xabzc: $this->datatables->from("\x6d\141\163\x74\x65\162\x5f\155\x61\160\145\x6c"); goto q2QYP; lXOQn: $this->db->order_by("\165\x72\165\164\141\156\x5f\x74\x61\155\160\x69\x6c"); goto MFjhf; LZjV0: $this->datatables->select("\151\x64\137\155\x61\160\145\x6c\54\40\x75\162\165\164\x61\156\x5f\x74\x61\x6d\x70\x69\x6c\54\40\156\x61\155\x61\x5f\x6d\x61\x70\x65\x6c\54\x20\x6b\157\x64\x65\x2c\40\153\145\x6c\157\x6d\x70\x6f\x6b\x2c\40\144\145\154\145\164\141\142\154\145\54\40\163\164\x61\164\165\163"); goto xabzc; o3H9x: $setting = $this->dashboard->getSetting(); goto LZjV0; q2QYP: $this->db->order_by("\153\x65\154\157\x6d\x70\x6f\x6b"); goto lXOQn; MFjhf: echo $this->datatables->generate(); goto mEa1B; mEa1B: } public function update() { $data = $this->master->updateMapel(); $this->output->set_content_type("\141\160\160\154\151\x63\x61\x74\151\x6f\x6e\57\152\163\157\x6e")->set_output($data); } public function aktifkan($id) { goto KcDK0; ltAVc: $this->db->where("\151\x64\x5f\x6d\141\160\145\154", $id); goto R9pwv; KcDK0: $this->db->set("\163\164\x61\x74\x75\163", "\61"); goto ltAVc; n49W0: $this->output_json($update); goto qd0BY; R9pwv: $update = $this->db->update("\155\x61\x73\164\145\162\137\155\141\160\x65\154"); goto n49W0; qd0BY: } public function delete() { goto TEDAD; mRg9D: $this->output_json(["\163\164\141\164\165\x73" => false, "\164\157\x74\x61\154" => "\124\151\144\x61\153\x20\x61\x64\x61\x20\144\141\164\x61\x20\171\141\156\x67\40\144\x69\160\151\154\x69\x68\x21"]); goto OxZe9; BWAhx: if (!$this->master->delete("\155\141\x73\x74\145\x72\137\x6d\141\x70\x65\x6c", $chk, "\x69\144\x5f\155\141\x70\x65\154")) { goto NYbhh; } goto ukvNV; Ppmrc: $tables = []; goto D93IH; fNYIW: goto bpytC; goto q7Pdn; d8_fq: if (!$chk) { goto aL9Wb; } goto puBfg; OxZe9: BZQWj: goto mvsNe; iwuI1: foreach ($tables as $table) { goto NP9n0; x3kCH: $this->db->where_in("\155\141\160\x65\x6c\137\x69\x64", $chk); goto etqri; G3U4e: $this->db->where_in("\x69\144\137\155\x61\160\x65\154", $chk); goto OllVA; hA7bH: array_push($messages, $table); goto KE1Xv; KE1Xv: vpPNJ: goto sPaz5; avcS8: if ($table == "\x63\142\164\x5f\x73\x6f\141\x6c") { goto NU98z; } goto G3U4e; Q2cgO: sknia: goto tSP6f; PNZO7: NU98z: goto x3kCH; NP9n0: if (!($table != "\155\x61\x73\164\145\162\137\x6d\x61\160\145\x6c")) { goto vAHki; } goto avcS8; tSP6f: if (!($num > 0)) { goto vpPNJ; } goto hA7bH; OllVA: $num = $this->db->count_all_results($table); goto YXwPP; SCprg: HBY4_: goto rWFnW; YXwPP: goto sknia; goto PNZO7; etqri: $num = $this->db->count_all_results($table); goto Q2cgO; sPaz5: vAHki: goto SCprg; rWFnW: } goto l0Gjq; TEDAD: $chk = $this->input->post("\143\x68\145\x63\x6b\145\x64", true); goto d8_fq; l0Gjq: VFHvs: goto e2tBO; ukvNV: $this->output_json(["\x73\164\x61\x74\165\163" => true, "\x74\x6f\x74\x61\154" => count($chk)]); goto nlbEe; q7Pdn: U7MFH: goto fy2wQ; swFGB: foreach ($tabless as $table) { goto HPTxL; FcEo2: weAX_: goto OiUxD; HPTxL: $fields = $this->db->field_data($table); goto TmwWm; OiUxD: uso1d: goto V_arZ; TmwWm: foreach ($fields as $field) { goto Fm4Vl; Fm4Vl: if (!($field->name == "\x69\144\x5f\x6d\x61\x70\x65\x6c" || $field->name == "\x6d\x61\x70\x65\154\x5f\x69\144")) { goto vvgcy; } goto wcUqe; wcUqe: array_push($tables, $table); goto YZlYx; YZlYx: vvgcy: goto cUhCh; cUhCh: UReBf: goto pWIJK; pWIJK: } goto FcEo2; V_arZ: } goto fM9FU; e2tBO: if (count($messages) > 0) { goto U7MFH; } goto BWAhx; nlbEe: NYbhh: goto fNYIW; NSFZE: goto BZQWj; goto RSnNn; fy2wQ: $this->output_json(["\x73\x74\x61\x74\165\x73" => false, "\164\157\x74\x61\154" => "\x4d\141\160\145\x6c\40\x64\x69\147\x75\x6e\x61\x6b\141\156\40\144\x69\40" . count($messages) . "\x20\164\141\x62\145\x6c\72\74\142\x72\x3e" . implode("\74\142\x72\76", $messages)]); goto sZFow; RSnNn: aL9Wb: goto mRg9D; puBfg: $messages = []; goto Ppmrc; D93IH: $tabless = $this->db->list_tables(); goto swFGB; fM9FU: MMnYC: goto iwuI1; sZFow: bpytC: goto NSFZE; mvsNe: } public function import($import_data = null) { goto fCd04; efztO: $data["\x74\x70\x5f\141\x63\x74\x69\x76\145"] = $this->dashboard->getTahunActive(); goto FjZ4a; oxxzW: $this->load->view("\x5f\164\145\x6d\x70\154\x61\x74\x65\x73\x2f\x64\141\163\150\142\157\x61\162\144\x2f\137\146\x6f\157\x74\145\x72"); goto OD09z; w8fxr: $this->load->view("\x5f\x74\x65\155\x70\154\141\164\x65\163\57\144\141\x73\x68\x62\157\x61\x72\144\x2f\x5f\150\145\x61\144\x65\x72", $data); goto TmvLx; ivN9d: $data["\x74\160"] = $this->dashboard->getTahun(); goto efztO; TmvLx: $this->load->view("\x6d\x61\163\x74\145\162\57\x6d\141\x70\x65\x6c\57\x69\x6d\x70\x6f\162\164"); goto oxxzW; yqv2f: $data = ["\x75\x73\x65\x72" => $user, "\152\x75\144\165\154" => "\115\141\164\141\40\120\x65\154\x61\152\x61\162\x61\x6e", "\163\x75\142\x6a\x75\x64\x75\154" => "\x49\155\x70\157\162\164\40\x4d\141\164\141\x20\x50\x65\x6c\x61\x6a\x61\162\x61\156", "\160\x72\157\x66\x69\x6c\145" => $this->dashboard->getProfileAdmin($user->id), "\x73\145\x74\x74\151\156\x67" => $this->dashboard->getSetting()]; goto iwIC_; iwIC_: if (!($import_data != null)) { goto kcaEG; } goto fQIb3; XRAez: $data["\163\155\x74\x5f\x61\143\164\x69\x76\x65"] = $this->dashboard->getSemesterActive(); goto w8fxr; fCd04: $user = $this->ion_auth->user()->row(); goto yqv2f; FjZ4a: $data["\x73\x6d\164"] = $this->dashboard->getSemester(); goto XRAez; VMJRJ: kcaEG: goto ivN9d; fQIb3: $data["\x69\x6d\160\157\162\164"] = $import_data; goto VMJRJ; OD09z: } public function do_import() { goto sDmHk; zEoAZ: $this->output->set_content_type("\141\160\160\154\x69\x63\141\164\151\x6f\156\x2f\x6a\163\x6f\156")->set_output($save); goto dlVMt; sDmHk: $inputs = $this->input->post("\155\141\x70\145\154", true); goto HQPk1; HQPk1: $save = $this->master->create("\x6d\x61\x73\164\x65\x72\x5f\x6d\x61\160\145\154", $inputs, true); goto zEoAZ; dlVMt: } }